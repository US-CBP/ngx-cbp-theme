<!-- Universal Navbar designed to hold the CBP Brand, apps nav, and user menu -->
<cbp-toolbar [position]="0" [toolbarState]="toolbarState" #cbpToolbar>

  <!-- Holds the CBP Brand -->
  <div class="cbp-brand-nav cbp-toolbar-title"
    fxFlexAlign="stretch"
    fxLayout="row"
    (click)="navigateToAppsDir($event)">
    <ng-template [ngTemplateOutlet]="cbpBrand"></ng-template>
  </div>

  <!-- -->
  <div class="cbp-toolbar-main-nav"
    *ngIf="!cbpAppsMenuExclude && !isProvided(cbpAppsMenu)">
    <cbp-apps-menu></cbp-apps-menu>
  </div>

  <!-- potential downstream customization of apps-menu -->
  <div class="cbp-toolbar-main-nav" 
    *ngIf="!cbpAppsMenuExclude && isProvided(cbpAppsMenu)">
    <ng-content select="cbp-applications-menu"></ng-content>
  </div>

  <div class="cbp-toolbar-right-nav"
    fxFlexAlign.gt-xs="end"
    fxLayout.gt-xs="row"
    fxLayout.lt-sm="column">
    <div fxFlex="auto" 
      *ngIf="!cbpFeedbackLinkExclude && !isProvided(cbpFeedbackLink)">
      <cbp-feedback-link></cbp-feedback-link>
    </div>

    <!-- potential downstream customization of feedback -->
    <div fxFlex="auto"
      *ngIf="!cbpFeedbackLinkExclude && isProvided(cbpFeedbackLink)">
      <ng-content select="cbp-feedback-link"></ng-content>
    </div>

    <div fxFlex="auto"
      *ngIf="!cbpUserMenuExclude && !isProvided(cbpUserMenu)">
      <cbp-user-menu></cbp-user-menu>
    </div>

    <!-- downstream customization of user-menu e.g. additional cbp-user-menu-item -->
    <div fxFlex="auto"
      *ngIf="!cbpUserMenuExclude && isProvided(cbpUserMenu)">
      <ng-content select="cbp-user-menu"></ng-content>
    </div>
  </div>
</cbp-toolbar>

<mat-list style="display: none"></mat-list>

<ng-template #cbpBrand>
  <div fxFlexAlign="center" fxLayout="column" fxLayoutAlign="start start">
    <h1 class="cbp-brand"  fxShow="false" fxShow.gt-sm>U.S. Customs &amp; Border Protection</h1>
    <div class="cbp-brand-short" fxShow="false" fxShow.lt-md>U.S. CBP</div>
    <div class="dhs-brand"  fxShow="false" fxShow.gt-sm>U.S. Department of Homeland Security</div>
  </div>
</ng-template>